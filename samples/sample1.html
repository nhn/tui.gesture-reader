<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
    <title></title>
    <script type="text/javascript" src="js/code-snippet.js"></script>
    <script type="text/javascript" src="js/gesture-reader.js"></script>
    <style type="text/css">
        #detect {
            width:500px; height:600px; background-color:hotpink;
        }
        .box {position:absolute; left: 520px; top:10px; background-color:lightpink; width:150px; height:150px;
            font-family: consolas, monaco, monospace;
            font-size: 12px; }
        .box span {display:block;}
        @media screen and (max-width: 400px) {
            .box {left: 150px; top:400px;}
        }
    </style>
</head>
<body>
    <div id="detect">
    </div>
    <div class="box">
        <span id="direction">Direction : <em></em></span>
        <span id="type">Type : <em></em></span>
    </div>
<script type="text/javascript">
    var DIRECTION = {
        W: 'WEST',
        N: 'NORTH',
        S: 'SOUTH',
        E: 'EAST'
    };

    var info = {},
        detect = document.getElementById('detect'),
        direction = document.getElementById('direction'),
        type = document.getElementById('type'),
        movedetector = new ne.component.Gesture.Reader({
            type: 'flick',
            flickRange: 100
        });

    detect.addEventListener('touchstart', function(e) {
        e = e || window.event;
        info.x = e.touches[0].clientX;
        info.y = e.touches[0].clientY;
        info.start = new Date();
    }, false);

    detect.addEventListener('touchmove', function(e) {
        e.preventDefault();
    }, false);

    detect.addEventListener('touchend', function(e) {
        e = e || window.event;
        info.end = new Date();

        var result = movedetector.figure({
            start: info.start,
            end: info.end,
            list : [{
                x: info.x,
                y: info.y
            }, {
                x: e.changedTouches[0].clientX,
                y: e.changedTouches[0].clientY
            }]
        });

        setTimeout(function() {
            if (result.isFlick) {
                type.getElementsByTagName('em')[0].innerHTML = 'flick';
            } else {
                type.getElementsByTagName('em')[0].innerHTML = 'not flick';
            }

            if (result.direction) {
                direction.getElementsByTagName('em')[0].innerHTML = DIRECTION[result.direction];
            }
        }, 300);
    }, false);

</script>
</body>
</html>